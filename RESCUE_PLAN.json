{
  "generated_at": "2026-02-14T00:19:17.183669",
  "root_path": "C:\\Users\\thepr\\Downloads\\code-analysis-tool\\repo\\src",
  "total_smells": 72,
  "estimated_hours": 27.566666666666666,
  "plans": [
    {
      "smell_type": "god_class",
      "smell_location": "code_audit\\analyzers\\security.py:127",
      "severity": "MEDIUM",
      "estimated_minutes": 45,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Open code_audit\\analyzers\\security.py and identify logical groups of methods in SecurityAnalyzer",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Look for methods that:\n# 1. Share a common prefix (get_user_*, validate_*, process_*)\n# 2. Access the same subset of instance variables\n# 3. Are called together in sequence\n# 4. Handle the same domain concept (auth, data, ui)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "CREATE",
          "description": "Create new module: code_audit\\analyzers/securityanalyzer_helpers.py",
          "source_file": null,
          "target_file": "code_audit\\analyzers/securityanalyzer_helpers.py",
          "source_lines": null,
          "code_hint": "\"\"\"\nHelper functions extracted from SecurityAnalyzer\n\nThis module contains extracted helper functions that were previously\nmethods of the SecurityAnalyzer class. They are now standalone functions\nthat accept the necessary data as parameters.\n\"\"\"\nfrom typing import Any\n\n\n# Paste extracted functions here\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "EXTRACT",
          "description": "Move helper methods (methods that don't use 'self' much) to new module",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": "code_audit\\analyzers/securityanalyzer_helpers.py",
          "source_lines": null,
          "code_hint": "\n# FOR EACH helper method:\n# 1. Copy the method to the new file\n# 2. Remove 'self' parameter if not needed\n# 3. Add any needed parameters that were self.xxx\n# 4. Update imports in new file\n# 5. In original class, replace method body with:\n#\n#    def old_method(self, args):\n#        from .class_helpers import old_method\n#        return old_method(self.data, args)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "TEST",
          "description": "Run tests to verify extraction didn't break anything",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -xvs -k securityanalyzer",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If class is still >200 lines, consider splitting into multiple classes",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Options:\n# 1. SecurityAnalyzerCore - essential state + core methods\n# 2. SecurityAnalyzerIO - file/network operations\n# 3. SecurityAnalyzerValidator - validation logic\n# 4. SecurityAnalyzerRenderer - display/formatting logic\n",
          "risk_level": "MEDIUM"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\security.py",
      "test_command": "pytest -xvs -k securityanalyzer"
    },
    {
      "smell_type": "god_class",
      "smell_location": "code_audit\\strangler\\debt_detector.py:103",
      "severity": "MEDIUM",
      "estimated_minutes": 31,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Open code_audit\\strangler\\debt_detector.py and identify logical groups of methods in DebtDetector",
          "source_file": "code_audit\\strangler\\debt_detector.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Look for methods that:\n# 1. Share a common prefix (get_user_*, validate_*, process_*)\n# 2. Access the same subset of instance variables\n# 3. Are called together in sequence\n# 4. Handle the same domain concept (auth, data, ui)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "CREATE",
          "description": "Create new module: code_audit\\strangler/debtdetector_helpers.py",
          "source_file": null,
          "target_file": "code_audit\\strangler/debtdetector_helpers.py",
          "source_lines": null,
          "code_hint": "\"\"\"\nHelper functions extracted from DebtDetector\n\nThis module contains extracted helper functions that were previously\nmethods of the DebtDetector class. They are now standalone functions\nthat accept the necessary data as parameters.\n\"\"\"\nfrom typing import Any\n\n\n# Paste extracted functions here\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "EXTRACT",
          "description": "Move helper methods (methods that don't use 'self' much) to new module",
          "source_file": "code_audit\\strangler\\debt_detector.py",
          "target_file": "code_audit\\strangler/debtdetector_helpers.py",
          "source_lines": null,
          "code_hint": "\n# FOR EACH helper method:\n# 1. Copy the method to the new file\n# 2. Remove 'self' parameter if not needed\n# 3. Add any needed parameters that were self.xxx\n# 4. Update imports in new file\n# 5. In original class, replace method body with:\n#\n#    def old_method(self, args):\n#        from .class_helpers import old_method\n#        return old_method(self.data, args)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "TEST",
          "description": "Run tests to verify extraction didn't break anything",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -xvs -k debtdetector",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If class is still >200 lines, consider splitting into multiple classes",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Options:\n# 1. DebtDetectorCore - essential state + core methods\n# 2. DebtDetectorIO - file/network operations\n# 3. DebtDetectorValidator - validation logic\n# 4. DebtDetectorRenderer - display/formatting logic\n",
          "risk_level": "MEDIUM"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\strangler\\debt_detector.py",
      "test_command": "pytest -xvs -k debtdetector"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\__main__.py:197",
      "severity": "HIGH",
      "estimated_minutes": 115,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _build_parser and mark logical blocks with comments",
          "source_file": "code_audit\\__main__.py",
          "target_file": null,
          "source_lines": [
            197,
            775
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\__main__.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __build_parser_validate_input(args):\n    '''Extracted from _build_parser: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _build_parser(original_args):\n    # Replace block 1 with:\n    validated = __build_parser_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass BuildParserProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\__main__.py",
      "test_command": "pytest -xvs -k _build_parser"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\__main__.py:777",
      "severity": "MEDIUM",
      "estimated_minutes": 10,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _handle_fence and mark logical blocks with comments",
          "source_file": "code_audit\\__main__.py",
          "target_file": null,
          "source_lines": [
            777,
            827
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\__main__.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __handle_fence_validate_input(args):\n    '''Extracted from _handle_fence: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _handle_fence(original_args):\n    # Replace block 1 with:\n    validated = __handle_fence_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass HandleFenceProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\__main__.py",
      "test_command": "pytest -xvs -k _handle_fence"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\__main__.py:829",
      "severity": "MEDIUM",
      "estimated_minutes": 15,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _handle_governance and mark logical blocks with comments",
          "source_file": "code_audit\\__main__.py",
          "target_file": null,
          "source_lines": [
            829,
            908
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\__main__.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __handle_governance_validate_input(args):\n    '''Extracted from _handle_governance: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _handle_governance(original_args):\n    # Replace block 1 with:\n    validated = __handle_governance_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass HandleGovernanceProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\__main__.py",
      "test_command": "pytest -xvs -k _handle_governance"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\__main__.py:1262",
      "severity": "HIGH",
      "estimated_minutes": 44,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _handle_debt and mark logical blocks with comments",
          "source_file": "code_audit\\__main__.py",
          "target_file": null,
          "source_lines": [
            1262,
            1486
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\__main__.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __handle_debt_validate_input(args):\n    '''Extracted from _handle_debt: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _handle_debt(original_args):\n    # Replace block 1 with:\n    validated = __handle_debt_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass HandleDebtProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\__main__.py",
      "test_command": "pytest -xvs -k _handle_debt"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\__main__.py:1530",
      "severity": "HIGH",
      "estimated_minutes": 43,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read main and mark logical blocks with comments",
          "source_file": "code_audit\\__main__.py",
          "target_file": null,
          "source_lines": [
            1530,
            1748
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\__main__.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _main_validate_input(args):\n    '''Extracted from main: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef main(original_args):\n    # Replace block 1 with:\n    validated = _main_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass MainProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\__main__.py",
      "test_command": "pytest -xvs -k main"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\analyzers\\dead_code.py:387",
      "severity": "HIGH",
      "estimated_minutes": 22,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read analyze_dead_code and mark logical blocks with comments",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": null,
          "source_lines": [
            387,
            501
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _analyze_dead_code_validate_input(args):\n    '''Extracted from analyze_dead_code: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef analyze_dead_code(original_args):\n    # Replace block 1 with:\n    validated = _analyze_dead_code_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass AnalyzeDeadCodeProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\dead_code.py",
      "test_command": "pytest -xvs -k analyze_dead_code"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\analyzers\\dead_code.py:150",
      "severity": "MEDIUM",
      "estimated_minutes": 11,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _detect_unreachable and mark logical blocks with comments",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": null,
          "source_lines": [
            150,
            205
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __detect_unreachable_validate_input(args):\n    '''Extracted from _detect_unreachable: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _detect_unreachable(original_args):\n    # Replace block 1 with:\n    validated = __detect_unreachable_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass DetectUnreachableProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\dead_code.py",
      "test_command": "pytest -xvs -k _detect_unreachable"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\analyzers\\dead_code.py:206",
      "severity": "MEDIUM",
      "estimated_minutes": 11,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _check_body_for_unreachable and mark logical blocks with comments",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": null,
          "source_lines": [
            206,
            263
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __check_body_for_unreachable_validate_input(args):\n    '''Extracted from _check_body_for_unreachable: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _check_body_for_unreachable(original_args):\n    # Replace block 1 with:\n    validated = __check_body_for_unreachable_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass CheckBodyForUnreachableProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\dead_code.py",
      "test_command": "pytest -xvs -k _check_body_for_unreachable"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\analyzers\\dead_code.py:264",
      "severity": "MEDIUM",
      "estimated_minutes": 14,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _detect_if_false and mark logical blocks with comments",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": null,
          "source_lines": [
            264,
            334
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __detect_if_false_validate_input(args):\n    '''Extracted from _detect_if_false: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _detect_if_false(original_args):\n    # Replace block 1 with:\n    validated = __detect_if_false_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass DetectIfFalseProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\dead_code.py",
      "test_command": "pytest -xvs -k _detect_if_false"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\analyzers\\duplication.py:162",
      "severity": "MEDIUM",
      "estimated_minutes": 18,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read run and mark logical blocks with comments",
          "source_file": "code_audit\\analyzers\\duplication.py",
          "target_file": null,
          "source_lines": [
            162,
            255
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\analyzers\\duplication.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _run_validate_input(args):\n    '''Extracted from run: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef run(original_args):\n    # Replace block 1 with:\n    validated = _run_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass RunProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\duplication.py",
      "test_command": "pytest -xvs -k run"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\analyzers\\exceptions.py:246",
      "severity": "HIGH",
      "estimated_minutes": 25,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read analyze_exceptions and mark logical blocks with comments",
          "source_file": "code_audit\\analyzers\\exceptions.py",
          "target_file": null,
          "source_lines": [
            246,
            375
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\analyzers\\exceptions.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _analyze_exceptions_validate_input(args):\n    '''Extracted from analyze_exceptions: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef analyze_exceptions(original_args):\n    # Replace block 1 with:\n    validated = _analyze_exceptions_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass AnalyzeExceptionsProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\exceptions.py",
      "test_command": "pytest -xvs -k analyze_exceptions"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\analyzers\\exceptions.py:42",
      "severity": "MEDIUM",
      "estimated_minutes": 14,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read run and mark logical blocks with comments",
          "source_file": "code_audit\\analyzers\\exceptions.py",
          "target_file": null,
          "source_lines": [
            42,
            112
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\analyzers\\exceptions.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _run_validate_input(args):\n    '''Extracted from run: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef run(original_args):\n    # Replace block 1 with:\n    validated = _run_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass RunProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\exceptions.py",
      "test_command": "pytest -xvs -k run"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\analyzers\\file_sizes.py:62",
      "severity": "MEDIUM",
      "estimated_minutes": 10,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read run and mark logical blocks with comments",
          "source_file": "code_audit\\analyzers\\file_sizes.py",
          "target_file": null,
          "source_lines": [
            62,
            114
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\analyzers\\file_sizes.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _run_validate_input(args):\n    '''Extracted from run: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef run(original_args):\n    # Replace block 1 with:\n    validated = _run_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass RunProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\file_sizes.py",
      "test_command": "pytest -xvs -k run"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\analyzers\\global_state.py:135",
      "severity": "MEDIUM",
      "estimated_minutes": 13,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _check_functions and mark logical blocks with comments",
          "source_file": "code_audit\\analyzers\\global_state.py",
          "target_file": null,
          "source_lines": [
            135,
            202
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\analyzers\\global_state.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __check_functions_validate_input(args):\n    '''Extracted from _check_functions: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _check_functions(original_args):\n    # Replace block 1 with:\n    validated = __check_functions_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass CheckFunctionsProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\global_state.py",
      "test_command": "pytest -xvs -k _check_functions"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\analyzers\\routers.py:225",
      "severity": "MEDIUM",
      "estimated_minutes": 10,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read build_consolidation_plan and mark logical blocks with comments",
          "source_file": "code_audit\\analyzers\\routers.py",
          "target_file": null,
          "source_lines": [
            225,
            278
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\analyzers\\routers.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _build_consolidation_plan_validate_input(args):\n    '''Extracted from build_consolidation_plan: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef build_consolidation_plan(original_args):\n    # Replace block 1 with:\n    validated = _build_consolidation_plan_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass BuildConsolidationPlanProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\routers.py",
      "test_command": "pytest -xvs -k build_consolidation_plan"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\analyzers\\routers.py:436",
      "severity": "MEDIUM",
      "estimated_minutes": 13,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read generate_router_report and mark logical blocks with comments",
          "source_file": "code_audit\\analyzers\\routers.py",
          "target_file": null,
          "source_lines": [
            436,
            503
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\analyzers\\routers.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _generate_router_report_validate_input(args):\n    '''Extracted from generate_router_report: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef generate_router_report(original_args):\n    # Replace block 1 with:\n    validated = _generate_router_report_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass GenerateRouterReportProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\routers.py",
      "test_command": "pytest -xvs -k generate_router_report"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\analyzers\\routers.py:309",
      "severity": "HIGH",
      "estimated_minutes": 23,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read run and mark logical blocks with comments",
          "source_file": "code_audit\\analyzers\\routers.py",
          "target_file": null,
          "source_lines": [
            309,
            424
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\analyzers\\routers.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _run_validate_input(args):\n    '''Extracted from run: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef run(original_args):\n    # Replace block 1 with:\n    validated = _run_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass RunProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\routers.py",
      "test_command": "pytest -xvs -k run"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\analyzers\\security.py:268",
      "severity": "MEDIUM",
      "estimated_minutes": 18,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _detect_subprocess_shell and mark logical blocks with comments",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": null,
          "source_lines": [
            268,
            358
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __detect_subprocess_shell_validate_input(args):\n    '''Extracted from _detect_subprocess_shell: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _detect_subprocess_shell(original_args):\n    # Replace block 1 with:\n    validated = __detect_subprocess_shell_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass DetectSubprocessShellProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\security.py",
      "test_command": "pytest -xvs -k _detect_subprocess_shell"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\analyzers\\security.py:359",
      "severity": "MEDIUM",
      "estimated_minutes": 15,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _detect_sql_injection and mark logical blocks with comments",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": null,
          "source_lines": [
            359,
            438
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __detect_sql_injection_validate_input(args):\n    '''Extracted from _detect_sql_injection: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _detect_sql_injection(original_args):\n    # Replace block 1 with:\n    validated = __detect_sql_injection_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass DetectSqlInjectionProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\security.py",
      "test_command": "pytest -xvs -k _detect_sql_injection"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\analyzers\\security.py:484",
      "severity": "MEDIUM",
      "estimated_minutes": 19,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _detect_yaml_unsafe and mark logical blocks with comments",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": null,
          "source_lines": [
            484,
            583
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __detect_yaml_unsafe_validate_input(args):\n    '''Extracted from _detect_yaml_unsafe: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _detect_yaml_unsafe(original_args):\n    # Replace block 1 with:\n    validated = __detect_yaml_unsafe_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass DetectYamlUnsafeProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\security.py",
      "test_command": "pytest -xvs -k _detect_yaml_unsafe"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\api.py:74",
      "severity": "MEDIUM",
      "estimated_minutes": 12,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read scan_project and mark logical blocks with comments",
          "source_file": "code_audit\\api.py",
          "target_file": null,
          "source_lines": [
            74,
            137
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\api.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _scan_project_validate_input(args):\n    '''Extracted from scan_project: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef scan_project(original_args):\n    # Replace block 1 with:\n    validated = _scan_project_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass ScanProjectProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\api.py",
      "test_command": "pytest -xvs -k scan_project"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\api.py:195",
      "severity": "MEDIUM",
      "estimated_minutes": 14,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read compare_debt and mark logical blocks with comments",
          "source_file": "code_audit\\api.py",
          "target_file": null,
          "source_lines": [
            195,
            267
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\api.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _compare_debt_validate_input(args):\n    '''Extracted from compare_debt: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef compare_debt(original_args):\n    # Replace block 1 with:\n    validated = _compare_debt_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass CompareDebtProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\api.py",
      "test_command": "pytest -xvs -k compare_debt"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\api.py:340",
      "severity": "MEDIUM",
      "estimated_minutes": 11,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read governance_audit and mark logical blocks with comments",
          "source_file": "code_audit\\api.py",
          "target_file": null,
          "source_lines": [
            340,
            397
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\api.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _governance_audit_validate_input(args):\n    '''Extracted from governance_audit: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef governance_audit(original_args):\n    # Replace block 1 with:\n    validated = _governance_audit_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass GovernanceAuditProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\api.py",
      "test_command": "pytest -xvs -k governance_audit"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\contracts\\safety_fence.py:154",
      "severity": "MEDIUM",
      "estimated_minutes": 12,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _check_safety_decorators and mark logical blocks with comments",
          "source_file": "code_audit\\contracts\\safety_fence.py",
          "target_file": null,
          "source_lines": [
            154,
            215
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\contracts\\safety_fence.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __check_safety_decorators_validate_input(args):\n    '''Extracted from _check_safety_decorators: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _check_safety_decorators(original_args):\n    # Replace block 1 with:\n    validated = __check_safety_decorators_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass CheckSafetyDecoratorsProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\contracts\\safety_fence.py",
      "test_command": "pytest -xvs -k _check_safety_decorators"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\core\\runner.py:23",
      "severity": "MEDIUM",
      "estimated_minutes": 19,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read run_scan and mark logical blocks with comments",
          "source_file": "code_audit\\core\\runner.py",
          "target_file": null,
          "source_lines": [
            23,
            119
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\core\\runner.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _run_scan_validate_input(args):\n    '''Extracted from run_scan: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef run_scan(original_args):\n    # Replace block 1 with:\n    validated = _run_scan_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass RunScanProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\core\\runner.py",
      "test_command": "pytest -xvs -k run_scan"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\governance\\deprecation.py:90",
      "severity": "HIGH",
      "estimated_minutes": 22,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read run and mark logical blocks with comments",
          "source_file": "code_audit\\governance\\deprecation.py",
          "target_file": null,
          "source_lines": [
            90,
            200
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\governance\\deprecation.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _run_validate_input(args):\n    '''Extracted from run: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef run(original_args):\n    # Replace block 1 with:\n    validated = _run_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass RunProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\governance\\deprecation.py",
      "test_command": "pytest -xvs -k run"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\governance\\import_ban.py:54",
      "severity": "MEDIUM",
      "estimated_minutes": 12,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read run and mark logical blocks with comments",
          "source_file": "code_audit\\governance\\import_ban.py",
          "target_file": null,
          "source_lines": [
            54,
            115
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\governance\\import_ban.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _run_validate_input(args):\n    '''Extracted from run: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef run(original_args):\n    # Replace block 1 with:\n    validated = _run_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass RunProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\governance\\import_ban.py",
      "test_command": "pytest -xvs -k run"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\governance\\legacy_usage.py:91",
      "severity": "MEDIUM",
      "estimated_minutes": 13,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read run and mark logical blocks with comments",
          "source_file": "code_audit\\governance\\legacy_usage.py",
          "target_file": null,
          "source_lines": [
            91,
            160
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\governance\\legacy_usage.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _run_validate_input(args):\n    '''Extracted from run: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef run(original_args):\n    # Replace block 1 with:\n    validated = _run_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass RunProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\governance\\legacy_usage.py",
      "test_command": "pytest -xvs -k run"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\governance\\sdk_boundary.py:102",
      "severity": "MEDIUM",
      "estimated_minutes": 13,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read run and mark logical blocks with comments",
          "source_file": "code_audit\\governance\\sdk_boundary.py",
          "target_file": null,
          "source_lines": [
            102,
            169
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\governance\\sdk_boundary.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _run_validate_input(args):\n    '''Extracted from run: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef run(original_args):\n    # Replace block 1 with:\n    validated = _run_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass RunProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\governance\\sdk_boundary.py",
      "test_command": "pytest -xvs -k run"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\insights\\translator.py:115",
      "severity": "MEDIUM",
      "estimated_minutes": 11,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _signal_from_global_state and mark logical blocks with comments",
          "source_file": "code_audit\\insights\\translator.py",
          "target_file": null,
          "source_lines": [
            115,
            172
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\insights\\translator.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __signal_from_global_state_validate_input(args):\n    '''Extracted from _signal_from_global_state: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _signal_from_global_state(original_args):\n    # Replace block 1 with:\n    validated = __signal_from_global_state_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass SignalFromGlobalStateProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\insights\\translator.py",
      "test_command": "pytest -xvs -k _signal_from_global_state"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\insights\\translator.py:176",
      "severity": "MEDIUM",
      "estimated_minutes": 11,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _signal_from_dead_code and mark logical blocks with comments",
          "source_file": "code_audit\\insights\\translator.py",
          "target_file": null,
          "source_lines": [
            176,
            232
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\insights\\translator.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __signal_from_dead_code_validate_input(args):\n    '''Extracted from _signal_from_dead_code: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _signal_from_dead_code(original_args):\n    # Replace block 1 with:\n    validated = __signal_from_dead_code_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass SignalFromDeadCodeProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\insights\\translator.py",
      "test_command": "pytest -xvs -k _signal_from_dead_code"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\insights\\translator.py:236",
      "severity": "MEDIUM",
      "estimated_minutes": 14,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _signal_from_security and mark logical blocks with comments",
          "source_file": "code_audit\\insights\\translator.py",
          "target_file": null,
          "source_lines": [
            236,
            308
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\insights\\translator.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __signal_from_security_validate_input(args):\n    '''Extracted from _signal_from_security: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _signal_from_security(original_args):\n    # Replace block 1 with:\n    validated = __signal_from_security_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass SignalFromSecurityProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\insights\\translator.py",
      "test_command": "pytest -xvs -k _signal_from_security"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\insights\\translator.py:310",
      "severity": "MEDIUM",
      "estimated_minutes": 17,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read findings_to_signals and mark logical blocks with comments",
          "source_file": "code_audit\\insights\\translator.py",
          "target_file": null,
          "source_lines": [
            310,
            398
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\insights\\translator.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _findings_to_signals_validate_input(args):\n    '''Extracted from findings_to_signals: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef findings_to_signals(original_args):\n    # Replace block 1 with:\n    validated = _findings_to_signals_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass FindingsToSignalsProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\insights\\translator.py",
      "test_command": "pytest -xvs -k findings_to_signals"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\inventory\\feature_hunt.py:95",
      "severity": "MEDIUM",
      "estimated_minutes": 10,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read run and mark logical blocks with comments",
          "source_file": "code_audit\\inventory\\feature_hunt.py",
          "target_file": null,
          "source_lines": [
            95,
            147
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\inventory\\feature_hunt.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _run_validate_input(args):\n    '''Extracted from run: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef run(original_args):\n    # Replace block 1 with:\n    validated = _run_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass RunProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\inventory\\feature_hunt.py",
      "test_command": "pytest -xvs -k run"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\ml\\bug_predictor.py:84",
      "severity": "MEDIUM",
      "estimated_minutes": 10,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read predict_file and mark logical blocks with comments",
          "source_file": "code_audit\\ml\\bug_predictor.py",
          "target_file": null,
          "source_lines": [
            84,
            135
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\ml\\bug_predictor.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _predict_file_validate_input(args):\n    '''Extracted from predict_file: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef predict_file(original_args):\n    # Replace block 1 with:\n    validated = _predict_file_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass PredictFileProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\ml\\bug_predictor.py",
      "test_command": "pytest -xvs -k predict_file"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\ml\\code_clustering.py:196",
      "severity": "MEDIUM",
      "estimated_minutes": 10,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read cluster_from_features and mark logical blocks with comments",
          "source_file": "code_audit\\ml\\code_clustering.py",
          "target_file": null,
          "source_lines": [
            196,
            248
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\ml\\code_clustering.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _cluster_from_features_validate_input(args):\n    '''Extracted from cluster_from_features: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef cluster_from_features(original_args):\n    # Replace block 1 with:\n    validated = _cluster_from_features_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass ClusterFromFeaturesProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\ml\\code_clustering.py",
      "test_command": "pytest -xvs -k cluster_from_features"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\ml\\feature_extraction.py:142",
      "severity": "MEDIUM",
      "estimated_minutes": 18,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read extract_file_features and mark logical blocks with comments",
          "source_file": "code_audit\\ml\\feature_extraction.py",
          "target_file": null,
          "source_lines": [
            142,
            234
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\ml\\feature_extraction.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _extract_file_features_validate_input(args):\n    '''Extracted from extract_file_features: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef extract_file_features(original_args):\n    # Replace block 1 with:\n    validated = _extract_file_features_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass ExtractFileFeaturesProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\ml\\feature_extraction.py",
      "test_command": "pytest -xvs -k extract_file_features"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\reports\\dashboard.py:42",
      "severity": "HIGH",
      "estimated_minutes": 23,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read render_dashboard and mark logical blocks with comments",
          "source_file": "code_audit\\reports\\dashboard.py",
          "target_file": null,
          "source_lines": [
            42,
            158
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\reports\\dashboard.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _render_dashboard_validate_input(args):\n    '''Extracted from render_dashboard: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef render_dashboard(original_args):\n    # Replace block 1 with:\n    validated = _render_dashboard_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass RenderDashboardProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\reports\\dashboard.py",
      "test_command": "pytest -xvs -k render_dashboard"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\reports\\debt_report.py:80",
      "severity": "HIGH",
      "estimated_minutes": 27,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read render_markdown and mark logical blocks with comments",
          "source_file": "code_audit\\reports\\debt_report.py",
          "target_file": null,
          "source_lines": [
            80,
            219
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\reports\\debt_report.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _render_markdown_validate_input(args):\n    '''Extracted from render_markdown: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef render_markdown(original_args):\n    # Replace block 1 with:\n    validated = _render_markdown_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass RenderMarkdownProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\reports\\debt_report.py",
      "test_command": "pytest -xvs -k render_markdown"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\reports\\exporters.py:49",
      "severity": "MEDIUM",
      "estimated_minutes": 10,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read export_markdown and mark logical blocks with comments",
          "source_file": "code_audit\\reports\\exporters.py",
          "target_file": null,
          "source_lines": [
            49,
            99
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\reports\\exporters.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _export_markdown_validate_input(args):\n    '''Extracted from export_markdown: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef export_markdown(original_args):\n    # Replace block 1 with:\n    validated = _export_markdown_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass ExportMarkdownProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\reports\\exporters.py",
      "test_command": "pytest -xvs -k export_markdown"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\reports\\exporters.py:139",
      "severity": "MEDIUM",
      "estimated_minutes": 12,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read export_html and mark logical blocks with comments",
          "source_file": "code_audit\\reports\\exporters.py",
          "target_file": null,
          "source_lines": [
            139,
            201
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\reports\\exporters.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _export_html_validate_input(args):\n    '''Extracted from export_html: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef export_html(original_args):\n    # Replace block 1 with:\n    validated = _export_html_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass ExportHtmlProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\reports\\exporters.py",
      "test_command": "pytest -xvs -k export_html"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\reports\\trend_analysis.py:135",
      "severity": "MEDIUM",
      "estimated_minutes": 11,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read render_trend_markdown and mark logical blocks with comments",
          "source_file": "code_audit\\reports\\trend_analysis.py",
          "target_file": null,
          "source_lines": [
            135,
            191
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\reports\\trend_analysis.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _render_trend_markdown_validate_input(args):\n    '''Extracted from render_trend_markdown: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef render_trend_markdown(original_args):\n    # Replace block 1 with:\n    validated = _render_trend_markdown_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass RenderTrendMarkdownProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\reports\\trend_analysis.py",
      "test_command": "pytest -xvs -k render_trend_markdown"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\run_result.py:87",
      "severity": "MEDIUM",
      "estimated_minutes": 13,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _compute_confidence_and_vibe and mark logical blocks with comments",
          "source_file": "code_audit\\run_result.py",
          "target_file": null,
          "source_lines": [
            87,
            156
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\run_result.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __compute_confidence_and_vibe_validate_input(args):\n    '''Extracted from _compute_confidence_and_vibe: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _compute_confidence_and_vibe(original_args):\n    # Replace block 1 with:\n    validated = __compute_confidence_and_vibe_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass ComputeConfidenceAndVibeProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\run_result.py",
      "test_command": "pytest -xvs -k _compute_confidence_and_vibe"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\run_result.py:158",
      "severity": "HIGH",
      "estimated_minutes": 30,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _build_signals_snapshot and mark logical blocks with comments",
          "source_file": "code_audit\\run_result.py",
          "target_file": null,
          "source_lines": [
            158,
            310
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\run_result.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __build_signals_snapshot_validate_input(args):\n    '''Extracted from _build_signals_snapshot: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _build_signals_snapshot(original_args):\n    # Replace block 1 with:\n    validated = __build_signals_snapshot_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass BuildSignalsSnapshotProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\run_result.py",
      "test_command": "pytest -xvs -k _build_signals_snapshot"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\run_result.py:314",
      "severity": "MEDIUM",
      "estimated_minutes": 15,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read build_run_result and mark logical blocks with comments",
          "source_file": "code_audit\\run_result.py",
          "target_file": null,
          "source_lines": [
            314,
            392
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\run_result.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _build_run_result_validate_input(args):\n    '''Extracted from build_run_result: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef build_run_result(original_args):\n    # Replace block 1 with:\n    validated = _build_run_result_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass BuildRunResultProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\run_result.py",
      "test_command": "pytest -xvs -k build_run_result"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\strangler\\debt_detector.py:191",
      "severity": "MEDIUM",
      "estimated_minutes": 13,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _check_classes and mark logical blocks with comments",
          "source_file": "code_audit\\strangler\\debt_detector.py",
          "target_file": null,
          "source_lines": [
            191,
            258
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\strangler\\debt_detector.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __check_classes_validate_input(args):\n    '''Extracted from _check_classes: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _check_classes(original_args):\n    # Replace block 1 with:\n    validated = __check_classes_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass CheckClassesProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\strangler\\debt_detector.py",
      "test_command": "pytest -xvs -k _check_classes"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\strangler\\debt_detector.py:259",
      "severity": "HIGH",
      "estimated_minutes": 30,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read _check_functions and mark logical blocks with comments",
          "source_file": "code_audit\\strangler\\debt_detector.py",
          "target_file": null,
          "source_lines": [
            259,
            413
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\strangler\\debt_detector.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef __check_functions_validate_input(args):\n    '''Extracted from _check_functions: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef _check_functions(original_args):\n    # Replace block 1 with:\n    validated = __check_functions_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass CheckFunctionsProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\strangler\\debt_detector.py",
      "test_command": "pytest -xvs -k _check_functions"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\strangler\\plan_generator.py:43",
      "severity": "MEDIUM",
      "estimated_minutes": 18,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read generate_plan and mark logical blocks with comments",
          "source_file": "code_audit\\strangler\\plan_generator.py",
          "target_file": null,
          "source_lines": [
            43,
            136
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\strangler\\plan_generator.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _generate_plan_validate_input(args):\n    '''Extracted from generate_plan: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef generate_plan(original_args):\n    # Replace block 1 with:\n    validated = _generate_plan_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass GeneratePlanProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\strangler\\plan_generator.py",
      "test_command": "pytest -xvs -k generate_plan"
    },
    {
      "smell_type": "god_function",
      "smell_location": "code_audit\\utils\\parse_truth_map.py:54",
      "severity": "MEDIUM",
      "estimated_minutes": 18,
      "steps": [
        {
          "step_number": 1,
          "action": "ANALYZE",
          "description": "Read parse_truth_map and mark logical blocks with comments",
          "source_file": "code_audit\\utils\\parse_truth_map.py",
          "target_file": null,
          "source_lines": [
            54,
            145
          ],
          "code_hint": "\n# Add comments like:\n# --- BLOCK 1: Input validation ---\n# --- BLOCK 2: Data transformation ---\n# --- BLOCK 3: Business logic ---\n# --- BLOCK 4: Output formatting ---\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract the first logical block to a helper function",
          "source_file": "code_audit\\utils\\parse_truth_map.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\ndef _parse_truth_map_validate_input(args):\n    '''Extracted from parse_truth_map: input validation'''\n    # Paste block 1 code here\n    # Return validated data\n\ndef parse_truth_map(original_args):\n    # Replace block 1 with:\n    validated = _parse_truth_map_validate_input(original_args)\n    # ... rest of function\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "TEST",
          "description": "Run tests to verify first extraction",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "pytest -x",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "REPEAT",
          "description": "Repeat extraction for each remaining block",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Pattern for each block:\n# 1. Create helper: _funcname_blockname(data) -> result\n# 2. Move block code to helper\n# 3. In main function, call helper\n# 4. Test after each extraction\n\n# Final function should look like:\ndef {func_name}(args):\n    validated = _validate_input(args)\n    transformed = _transform_data(validated)\n    result = _apply_business_logic(transformed)\n    return _format_output(result)\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "OPTIONAL",
          "description": "If >5 helper functions, consider making a class",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\nclass ParseTruthMapProcessor:\n    def __init__(self, config):\n        self.config = config\n\n    def validate(self, data): ...\n    def transform(self, data): ...\n    def process(self, data): ...\n    def format(self, result): ...\n\n    def run(self, data):\n        '''Main entry point (replaces original function)'''\n        validated = self.validate(data)\n        transformed = self.transform(validated)\n        result = self.process(transformed)\n        return self.format(result)\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\utils\\parse_truth_map.py",
      "test_command": "pytest -xvs -k parse_truth_map"
    },
    {
      "smell_type": "large_file",
      "smell_location": "code_audit\\__main__.py",
      "severity": "HIGH",
      "estimated_minutes": 70,
      "steps": [
        {
          "step_number": 1,
          "action": "CREATE",
          "description": "Convert code_audit\\__main__.py to a package (folder)",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Run these commands:\nmkdir -p code_audit/__main__\ntouch code_audit/__main__/__init__.py\n\n# Or use Python:\nfrom pathlib import Path\npkg = Path('code_audit/__main__')\npkg.mkdir(exist_ok=True)\n(pkg / '__init__.py').touch()\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "ANALYZE",
          "description": "Identify logical domains in the file",
          "source_file": "code_audit\\__main__.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Common patterns to look for:\n# - Classes that work together\n# - Functions with common prefixes\n# - Imports that cluster together\n# - Related constants/configs\n\n# Typical splits:\n# - models.py: Data classes, schemas\n# - services.py: Business logic\n# - utils.py: Helper functions\n# - constants.py: Config values\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "MOVE",
          "description": "Move data models to models.py",
          "source_file": "code_audit\\__main__.py",
          "target_file": "code_audit/__main__/models.py",
          "source_lines": null,
          "code_hint": "\n# code_audit/__main__/models.py\n'''Data models extracted from __main__.py'''\n\nfrom dataclasses import dataclass\nfrom typing import Optional, List\n\n# Move all @dataclass, TypedDict, NamedTuple here\n# Move Pydantic models here\n# Move SQLAlchemy models here\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "MOVE",
          "description": "Move business logic to services.py",
          "source_file": "code_audit\\__main__.py",
          "target_file": "code_audit/__main__/services.py",
          "source_lines": null,
          "code_hint": "\n# code_audit/__main__/services.py\n'''Business logic extracted from __main__.py'''\n\nfrom .models import *  # Import your models\n\n# Move classes/functions that:\n# - Do complex processing\n# - Interact with external services\n# - Contain business rules\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "UPDATE",
          "description": "Re-export public API from __init__.py",
          "source_file": null,
          "target_file": "code_audit/__main__/__init__.py",
          "source_lines": null,
          "code_hint": "\n# code_audit/__main__/__init__.py\n'''\n  Main   module\n\nPublic API re-exported here for backward compatibility.\n'''\n\nfrom .models import (\n    Model1,\n    Model2,\n)\n\nfrom .services import (\n    process_data,\n    validate_input,\n)\n\n__all__ = [\n    'Model1',\n    'Model2',\n    'process_data',\n    'validate_input',\n]\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 6,
          "action": "DELETE",
          "description": "Delete original code_audit\\__main__.py (now replaced by package)",
          "source_file": "code_audit\\__main__.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Only after tests pass!\nrm code_audit\\__main__.py\n\n# Or safer:\ngit rm code_audit\\__main__.py\n",
          "risk_level": "HIGH"
        }
      ],
      "rollback_hint": "git checkout -- code_audit/",
      "test_command": "pytest -xvs code_audit/"
    },
    {
      "smell_type": "large_file",
      "smell_location": "code_audit\\analyzers\\dead_code.py",
      "severity": "MEDIUM",
      "estimated_minutes": 22,
      "steps": [
        {
          "step_number": 1,
          "action": "CREATE",
          "description": "Convert code_audit\\analyzers\\dead_code.py to a package (folder)",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Run these commands:\nmkdir -p code_audit\\analyzers/dead_code\ntouch code_audit\\analyzers/dead_code/__init__.py\n\n# Or use Python:\nfrom pathlib import Path\npkg = Path('code_audit\\analyzers/dead_code')\npkg.mkdir(exist_ok=True)\n(pkg / '__init__.py').touch()\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "ANALYZE",
          "description": "Identify logical domains in the file",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Common patterns to look for:\n# - Classes that work together\n# - Functions with common prefixes\n# - Imports that cluster together\n# - Related constants/configs\n\n# Typical splits:\n# - models.py: Data classes, schemas\n# - services.py: Business logic\n# - utils.py: Helper functions\n# - constants.py: Config values\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "MOVE",
          "description": "Move data models to models.py",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": "code_audit\\analyzers/dead_code/models.py",
          "source_lines": null,
          "code_hint": "\n# code_audit\\analyzers/dead_code/models.py\n'''Data models extracted from dead_code.py'''\n\nfrom dataclasses import dataclass\nfrom typing import Optional, List\n\n# Move all @dataclass, TypedDict, NamedTuple here\n# Move Pydantic models here\n# Move SQLAlchemy models here\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "MOVE",
          "description": "Move business logic to services.py",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": "code_audit\\analyzers/dead_code/services.py",
          "source_lines": null,
          "code_hint": "\n# code_audit\\analyzers/dead_code/services.py\n'''Business logic extracted from dead_code.py'''\n\nfrom .models import *  # Import your models\n\n# Move classes/functions that:\n# - Do complex processing\n# - Interact with external services\n# - Contain business rules\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "UPDATE",
          "description": "Re-export public API from __init__.py",
          "source_file": null,
          "target_file": "code_audit\\analyzers/dead_code/__init__.py",
          "source_lines": null,
          "code_hint": "\n# code_audit\\analyzers/dead_code/__init__.py\n'''\nDead Code module\n\nPublic API re-exported here for backward compatibility.\n'''\n\nfrom .models import (\n    Model1,\n    Model2,\n)\n\nfrom .services import (\n    process_data,\n    validate_input,\n)\n\n__all__ = [\n    'Model1',\n    'Model2',\n    'process_data',\n    'validate_input',\n]\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 6,
          "action": "DELETE",
          "description": "Delete original code_audit\\analyzers\\dead_code.py (now replaced by package)",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Only after tests pass!\nrm code_audit\\analyzers\\dead_code.py\n\n# Or safer:\ngit rm code_audit\\analyzers\\dead_code.py\n",
          "risk_level": "HIGH"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers/",
      "test_command": "pytest -xvs code_audit\\analyzers/"
    },
    {
      "smell_type": "large_file",
      "smell_location": "code_audit\\analyzers\\routers.py",
      "severity": "MEDIUM",
      "estimated_minutes": 20,
      "steps": [
        {
          "step_number": 1,
          "action": "CREATE",
          "description": "Convert code_audit\\analyzers\\routers.py to a package (folder)",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Run these commands:\nmkdir -p code_audit\\analyzers/routers\ntouch code_audit\\analyzers/routers/__init__.py\n\n# Or use Python:\nfrom pathlib import Path\npkg = Path('code_audit\\analyzers/routers')\npkg.mkdir(exist_ok=True)\n(pkg / '__init__.py').touch()\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "ANALYZE",
          "description": "Identify logical domains in the file",
          "source_file": "code_audit\\analyzers\\routers.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Common patterns to look for:\n# - Classes that work together\n# - Functions with common prefixes\n# - Imports that cluster together\n# - Related constants/configs\n\n# Typical splits:\n# - models.py: Data classes, schemas\n# - services.py: Business logic\n# - utils.py: Helper functions\n# - constants.py: Config values\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "MOVE",
          "description": "Move data models to models.py",
          "source_file": "code_audit\\analyzers\\routers.py",
          "target_file": "code_audit\\analyzers/routers/models.py",
          "source_lines": null,
          "code_hint": "\n# code_audit\\analyzers/routers/models.py\n'''Data models extracted from routers.py'''\n\nfrom dataclasses import dataclass\nfrom typing import Optional, List\n\n# Move all @dataclass, TypedDict, NamedTuple here\n# Move Pydantic models here\n# Move SQLAlchemy models here\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "MOVE",
          "description": "Move business logic to services.py",
          "source_file": "code_audit\\analyzers\\routers.py",
          "target_file": "code_audit\\analyzers/routers/services.py",
          "source_lines": null,
          "code_hint": "\n# code_audit\\analyzers/routers/services.py\n'''Business logic extracted from routers.py'''\n\nfrom .models import *  # Import your models\n\n# Move classes/functions that:\n# - Do complex processing\n# - Interact with external services\n# - Contain business rules\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "UPDATE",
          "description": "Re-export public API from __init__.py",
          "source_file": null,
          "target_file": "code_audit\\analyzers/routers/__init__.py",
          "source_lines": null,
          "code_hint": "\n# code_audit\\analyzers/routers/__init__.py\n'''\nRouters module\n\nPublic API re-exported here for backward compatibility.\n'''\n\nfrom .models import (\n    Model1,\n    Model2,\n)\n\nfrom .services import (\n    process_data,\n    validate_input,\n)\n\n__all__ = [\n    'Model1',\n    'Model2',\n    'process_data',\n    'validate_input',\n]\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 6,
          "action": "DELETE",
          "description": "Delete original code_audit\\analyzers\\routers.py (now replaced by package)",
          "source_file": "code_audit\\analyzers\\routers.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Only after tests pass!\nrm code_audit\\analyzers\\routers.py\n\n# Or safer:\ngit rm code_audit\\analyzers\\routers.py\n",
          "risk_level": "HIGH"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers/",
      "test_command": "pytest -xvs code_audit\\analyzers/"
    },
    {
      "smell_type": "large_file",
      "smell_location": "code_audit\\analyzers\\security.py",
      "severity": "MEDIUM",
      "estimated_minutes": 23,
      "steps": [
        {
          "step_number": 1,
          "action": "CREATE",
          "description": "Convert code_audit\\analyzers\\security.py to a package (folder)",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Run these commands:\nmkdir -p code_audit\\analyzers/security\ntouch code_audit\\analyzers/security/__init__.py\n\n# Or use Python:\nfrom pathlib import Path\npkg = Path('code_audit\\analyzers/security')\npkg.mkdir(exist_ok=True)\n(pkg / '__init__.py').touch()\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "ANALYZE",
          "description": "Identify logical domains in the file",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Common patterns to look for:\n# - Classes that work together\n# - Functions with common prefixes\n# - Imports that cluster together\n# - Related constants/configs\n\n# Typical splits:\n# - models.py: Data classes, schemas\n# - services.py: Business logic\n# - utils.py: Helper functions\n# - constants.py: Config values\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "MOVE",
          "description": "Move data models to models.py",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": "code_audit\\analyzers/security/models.py",
          "source_lines": null,
          "code_hint": "\n# code_audit\\analyzers/security/models.py\n'''Data models extracted from security.py'''\n\nfrom dataclasses import dataclass\nfrom typing import Optional, List\n\n# Move all @dataclass, TypedDict, NamedTuple here\n# Move Pydantic models here\n# Move SQLAlchemy models here\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "MOVE",
          "description": "Move business logic to services.py",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": "code_audit\\analyzers/security/services.py",
          "source_lines": null,
          "code_hint": "\n# code_audit\\analyzers/security/services.py\n'''Business logic extracted from security.py'''\n\nfrom .models import *  # Import your models\n\n# Move classes/functions that:\n# - Do complex processing\n# - Interact with external services\n# - Contain business rules\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "UPDATE",
          "description": "Re-export public API from __init__.py",
          "source_file": null,
          "target_file": "code_audit\\analyzers/security/__init__.py",
          "source_lines": null,
          "code_hint": "\n# code_audit\\analyzers/security/__init__.py\n'''\nSecurity module\n\nPublic API re-exported here for backward compatibility.\n'''\n\nfrom .models import (\n    Model1,\n    Model2,\n)\n\nfrom .services import (\n    process_data,\n    validate_input,\n)\n\n__all__ = [\n    'Model1',\n    'Model2',\n    'process_data',\n    'validate_input',\n]\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 6,
          "action": "DELETE",
          "description": "Delete original code_audit\\analyzers\\security.py (now replaced by package)",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Only after tests pass!\nrm code_audit\\analyzers\\security.py\n\n# Or safer:\ngit rm code_audit\\analyzers\\security.py\n",
          "risk_level": "HIGH"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers/",
      "test_command": "pytest -xvs code_audit\\analyzers/"
    },
    {
      "smell_type": "large_file",
      "smell_location": "code_audit\\scaffold.py",
      "severity": "HIGH",
      "estimated_minutes": 41,
      "steps": [
        {
          "step_number": 1,
          "action": "CREATE",
          "description": "Convert code_audit\\scaffold.py to a package (folder)",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Run these commands:\nmkdir -p code_audit/scaffold\ntouch code_audit/scaffold/__init__.py\n\n# Or use Python:\nfrom pathlib import Path\npkg = Path('code_audit/scaffold')\npkg.mkdir(exist_ok=True)\n(pkg / '__init__.py').touch()\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "ANALYZE",
          "description": "Identify logical domains in the file",
          "source_file": "code_audit\\scaffold.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Common patterns to look for:\n# - Classes that work together\n# - Functions with common prefixes\n# - Imports that cluster together\n# - Related constants/configs\n\n# Typical splits:\n# - models.py: Data classes, schemas\n# - services.py: Business logic\n# - utils.py: Helper functions\n# - constants.py: Config values\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "MOVE",
          "description": "Move data models to models.py",
          "source_file": "code_audit\\scaffold.py",
          "target_file": "code_audit/scaffold/models.py",
          "source_lines": null,
          "code_hint": "\n# code_audit/scaffold/models.py\n'''Data models extracted from scaffold.py'''\n\nfrom dataclasses import dataclass\nfrom typing import Optional, List\n\n# Move all @dataclass, TypedDict, NamedTuple here\n# Move Pydantic models here\n# Move SQLAlchemy models here\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 4,
          "action": "MOVE",
          "description": "Move business logic to services.py",
          "source_file": "code_audit\\scaffold.py",
          "target_file": "code_audit/scaffold/services.py",
          "source_lines": null,
          "code_hint": "\n# code_audit/scaffold/services.py\n'''Business logic extracted from scaffold.py'''\n\nfrom .models import *  # Import your models\n\n# Move classes/functions that:\n# - Do complex processing\n# - Interact with external services\n# - Contain business rules\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 5,
          "action": "UPDATE",
          "description": "Re-export public API from __init__.py",
          "source_file": null,
          "target_file": "code_audit/scaffold/__init__.py",
          "source_lines": null,
          "code_hint": "\n# code_audit/scaffold/__init__.py\n'''\nScaffold module\n\nPublic API re-exported here for backward compatibility.\n'''\n\nfrom .models import (\n    Model1,\n    Model2,\n)\n\nfrom .services import (\n    process_data,\n    validate_input,\n)\n\n__all__ = [\n    'Model1',\n    'Model2',\n    'process_data',\n    'validate_input',\n]\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 6,
          "action": "DELETE",
          "description": "Delete original code_audit\\scaffold.py (now replaced by package)",
          "source_file": "code_audit\\scaffold.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# Only after tests pass!\nrm code_audit\\scaffold.py\n\n# Or safer:\ngit rm code_audit\\scaffold.py\n",
          "risk_level": "HIGH"
        }
      ],
      "rollback_hint": "git checkout -- code_audit/",
      "test_command": "pytest -xvs code_audit/"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\__main__.py:1530",
      "severity": "MEDIUM",
      "estimated_minutes": 25,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\__main__.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\__main__.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef main(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef main(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\__main__.py",
      "test_command": "pytest -xvs -k main"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\analyzers\\complexity.py:16",
      "severity": "HIGH",
      "estimated_minutes": 35,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\analyzers\\complexity.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\analyzers\\complexity.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef _cyclomatic_complexity(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef _cyclomatic_complexity(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\complexity.py",
      "test_command": "pytest -xvs -k _cyclomatic_complexity"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\analyzers\\dead_code.py:387",
      "severity": "HIGH",
      "estimated_minutes": 35,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef analyze_dead_code(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef analyze_dead_code(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\dead_code.py",
      "test_command": "pytest -xvs -k analyze_dead_code"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\analyzers\\dead_code.py:150",
      "severity": "HIGH",
      "estimated_minutes": 35,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\analyzers\\dead_code.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef _detect_unreachable(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef _detect_unreachable(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\dead_code.py",
      "test_command": "pytest -xvs -k _detect_unreachable"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\analyzers\\exceptions.py:181",
      "severity": "MEDIUM",
      "estimated_minutes": 25,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\analyzers\\exceptions.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\analyzers\\exceptions.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef _handler_has_logging(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef _handler_has_logging(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\exceptions.py",
      "test_command": "pytest -xvs -k _handler_has_logging"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\analyzers\\exceptions.py:246",
      "severity": "HIGH",
      "estimated_minutes": 35,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\analyzers\\exceptions.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\analyzers\\exceptions.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef analyze_exceptions(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef analyze_exceptions(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\exceptions.py",
      "test_command": "pytest -xvs -k analyze_exceptions"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\analyzers\\exceptions.py:42",
      "severity": "MEDIUM",
      "estimated_minutes": 30,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\analyzers\\exceptions.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\analyzers\\exceptions.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef run(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef run(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\exceptions.py",
      "test_command": "pytest -xvs -k run"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\analyzers\\security.py:168",
      "severity": "MEDIUM",
      "estimated_minutes": 30,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef _detect_hardcoded_secrets(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef _detect_hardcoded_secrets(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\security.py",
      "test_command": "pytest -xvs -k _detect_hardcoded_secrets"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\analyzers\\security.py:359",
      "severity": "HIGH",
      "estimated_minutes": 35,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef _detect_sql_injection(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef _detect_sql_injection(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\security.py",
      "test_command": "pytest -xvs -k _detect_sql_injection"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\analyzers\\security.py:484",
      "severity": "MEDIUM",
      "estimated_minutes": 30,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\analyzers\\security.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef _detect_yaml_unsafe(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef _detect_yaml_unsafe(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\analyzers\\security.py",
      "test_command": "pytest -xvs -k _detect_yaml_unsafe"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\governance\\legacy_usage.py:91",
      "severity": "MEDIUM",
      "estimated_minutes": 25,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\governance\\legacy_usage.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\governance\\legacy_usage.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef run(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef run(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\governance\\legacy_usage.py",
      "test_command": "pytest -xvs -k run"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\ml\\feature_extraction.py:25",
      "severity": "HIGH",
      "estimated_minutes": 35,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\ml\\feature_extraction.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\ml\\feature_extraction.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef _cyclomatic_complexity(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef _cyclomatic_complexity(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\ml\\feature_extraction.py",
      "test_command": "pytest -xvs -k _cyclomatic_complexity"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\ml\\feature_extraction.py:142",
      "severity": "MEDIUM",
      "estimated_minutes": 25,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\ml\\feature_extraction.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\ml\\feature_extraction.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef extract_file_features(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef extract_file_features(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\ml\\feature_extraction.py",
      "test_command": "pytest -xvs -k extract_file_features"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\run_result.py:87",
      "severity": "HIGH",
      "estimated_minutes": 40,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\run_result.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\run_result.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef _compute_confidence_and_vibe(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef _compute_confidence_and_vibe(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\run_result.py",
      "test_command": "pytest -xvs -k _compute_confidence_and_vibe"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\strangler\\debt_detector.py:47",
      "severity": "MEDIUM",
      "estimated_minutes": 25,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\strangler\\debt_detector.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\strangler\\debt_detector.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef _count_attributes(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef _count_attributes(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\strangler\\debt_detector.py",
      "test_command": "pytest -xvs -k _count_attributes"
    },
    {
      "smell_type": "deep_nesting",
      "smell_location": "code_audit\\web_api\\config.py:39",
      "severity": "MEDIUM",
      "estimated_minutes": 25,
      "steps": [
        {
          "step_number": 1,
          "action": "REFACTOR",
          "description": "Convert nested conditions to guard clauses",
          "source_file": "code_audit\\web_api\\config.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef process(data):\n    if data:\n        if data.valid:\n            if data.ready:\n                # actual logic here\n                pass\n\n# AFTER:\ndef process(data):\n    if not data:\n        return None\n    if not data.valid:\n        raise ValueError(\"Invalid data\")\n    if not data.ready:\n        return  # or raise\n\n    # actual logic here - now at top level\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 2,
          "action": "EXTRACT",
          "description": "Extract deeply nested blocks to helper functions",
          "source_file": "code_audit\\web_api\\config.py",
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\ndef __post_init__(data):\n    for item in data:\n        if item.valid:\n            for sub in item.subs:\n                if sub.ready:\n                    # deep logic\n                    pass\n\n# AFTER:\ndef _process_sub(sub):\n    '''Extracted inner logic'''\n    if not sub.ready:\n        return None\n    # logic here\n\ndef _process_item(item):\n    '''Extracted middle logic'''\n    if not item.valid:\n        return []\n    return [_process_sub(sub) for sub in item.subs]\n\ndef __post_init__(data):\n    results = []\n    for item in data:\n        results.extend(_process_item(item))\n    return results\n",
          "risk_level": "LOW"
        },
        {
          "step_number": 3,
          "action": "SIMPLIFY",
          "description": "Replace simple nested loops with comprehensions",
          "source_file": null,
          "target_file": null,
          "source_lines": null,
          "code_hint": "\n# BEFORE:\nresults = []\nfor item in items:\n    if item.valid:\n        results.append(item.value)\n\n# AFTER:\nresults = [item.value for item in items if item.valid]\n",
          "risk_level": "LOW"
        }
      ],
      "rollback_hint": "git checkout -- code_audit\\web_api\\config.py",
      "test_command": "pytest -xvs -k __post_init__"
    }
  ]
}